!function(a,b){"use strict";function c(){return b}"function"==typeof define&&define.amd?define("tinysort",c):a.tinysort=b}(this,function(){"use strict";function a(a,d){function h(){0===arguments.length?r({}):b(arguments,function(a){r(B(a)?{selector:a}:a)}),n=I.length}function r(a){var b=!!a.selector,d=b&&":"===a.selector[0],e=c(a||{},q);I.push(c({hasSelector:b,hasAttr:!(e.attr===g||""===e.attr),hasData:e.data!==g,hasFilter:d,sortReturnNumber:"asc"===e.order?1:-1},e))}function s(){b(a,function(a,b){D?D!==a.parentNode&&(J=!1):D=a.parentNode;var c=I[0],d=c.hasFilter,e=c.selector,f=!e||d&&a.matchesSelector(e)||e&&a.querySelector(e),g=f?G:H,h={elm:a,pos:b,posn:g.length};F.push(h),g.push(h)}),C=G.slice(0)}function t(a,b,c){for(var d=c(a.toString()),e=c(b.toString()),f=0;d[f]&&e[f];f++)if(d[f]!==e[f]){var g=Number(d[f]),h=Number(e[f]);return g==d[f]&&h==e[f]?g-h:d[f]>e[f]?1:-1}return d.length-e.length}function u(a){for(var b,c,d=[],e=0,f=-1,g=0;b=(c=a.charAt(e++)).charCodeAt(0);){var h=46==b||b>=48&&57>=b;h!==g&&(d[++f]="",g=h),d[f]+=c}return d}function v(a,c){var d=0;for(0!==o&&(o=0);0===d&&n>o;){var g=I[o],h=g.ignoreDashes?l:k;if(b(m,function(a){var b=a.prepare;b&&b(g)}),g.sortFunction)d=g.sortFunction(a,c);else if("rand"==g.order)d=Math.random()<.5?1:-1;else{var i=f,p=A(a,g),q=A(c,g),r=""===p||p===e,s=""===q||q===e;if(p===q)d=0;else if(g.emptyEnd&&(r||s))d=r&&s?0:r?1:-1;else{if(!g.forceStrings){var v=B(p)?p&&p.match(h):f,w=B(q)?q&&q.match(h):f;if(v&&w){var x=p.substr(0,p.length-v[0].length),y=q.substr(0,q.length-w[0].length);x==y&&(i=!f,p=j(v[0]),q=j(w[0]))}}d=p===e||q===e?0:g.natural&&(isNaN(p)||isNaN(q))?t(p,q,u):q>p?-1:p>q?1:0}}b(m,function(a){var b=a.sort;b&&(d=b(g,i,p,q,d))}),d*=g.sortReturnNumber,0===d&&o++}return 0===d&&(d=a.pos>c.pos?1:-1),d}function w(){var a=G.length===F.length;if(J&&a)M?G.forEach(function(a,b){a.elm.style.order=b}):D?D.appendChild(x()):console.warn("parentNode has been removed");else{var b=I[0],c=b.place,d="org"===c,e="start"===c,f="end"===c,g="first"===c,h="last"===c;if(d)G.forEach(y),G.forEach(function(a,b){z(C[b],a.elm)});else if(e||f){var i=C[e?0:C.length-1],j=i&&i.elm.parentNode,k=j&&(e&&j.firstChild||j.lastChild);k&&(k!==i.elm&&(i={elm:k}),y(i),f&&j.appendChild(i.ghost),z(i,x()))}else if(g||h){var l=C[g?0:C.length-1];z(y(l),x())}}}function x(){return G.forEach(function(a){E.appendChild(a.elm)}),E}function y(a){var b=a.elm,c=i.createElement("div");return a.ghost=c,b.parentNode.insertBefore(c,b),a}function z(a,b){var c=a.ghost,d=c.parentNode;d.insertBefore(b,c),d.removeChild(c),delete a.ghost}function A(a,b){var c,d=a.elm;return b.selector&&(b.hasFilter?d.matchesSelector(b.selector)||(d=g):d=d.querySelector(b.selector)),b.hasAttr?c=d.getAttribute(b.attr):b.useVal?c=d.value||d.getAttribute("value"):b.hasData?c=d.getAttribute("data-"+b.data):d&&(c=d.textContent),B(c)&&(b.cases||(c=c.toLowerCase()),c=c.replace(/\s+/g," ")),null===c&&(c=p),c}function B(a){return"string"==typeof a}B(a)&&(a=i.querySelectorAll(a)),0===a.length&&console.warn("No elements to sort");var C,D,E=i.createDocumentFragment(),F=[],G=[],H=[],I=[],J=!0,K=a.length&&a[0].parentNode,L=K.rootNode!==document,M=a.length&&(d===e||d.useFlex!==!1)&&!L&&-1!==getComputedStyle(K,null).display.indexOf("flex");return h.apply(g,Array.prototype.slice.call(arguments,1)),s(),G.sort(v),w(),G.map(function(a){return a.elm})}function b(a,b){for(var c,d=a.length,e=d;e--;)c=d-e-1,b(a[c],c)}function c(a,b,c){for(var d in b)(c||a[d]===e)&&(a[d]=b[d]);return a}function d(a,b,c){m.push({prepare:a,sort:b,sortBy:c})}var e,f=!1,g=null,h=window,i=h.document,j=parseFloat,k=/(-?\d+\.?\d*)\s*$/g,l=/(\d+\.?\d*)\s*$/g,m=[],n=0,o=0,p=String.fromCharCode(4095),q={selector:g,order:"asc",attr:g,data:g,useVal:f,place:"org",returns:f,cases:f,natural:f,forceStrings:f,ignoreDashes:f,sortFunction:g,useFlex:f,emptyEnd:f};return h.Element&&function(a){a.matchesSelector=a.matchesSelector||a.mozMatchesSelector||a.msMatchesSelector||a.oMatchesSelector||a.webkitMatchesSelector||function(a){for(var b=this,c=(b.parentNode||b.document).querySelectorAll(a),d=-1;c[++d]&&c[d]!=b;);return!!c[d]}}(Element.prototype),c(d,{loop:b}),c(a,{plugin:d,defaults:q})}()),function(a,b){"function"==typeof define&&define.amd?define(["jquery","tinysort","moment"],b):b(a.jQuery,a.tinysort,a.moment||void 0)}(this,function(a,b,c){function d(b){var d="undefined"!=typeof c;i=b.sign?b.sign:"arrow","default"==b.customSort&&(b.customSort=g),j=b.customSort||j||g,k=b.emptyEnd,a("table.sortable").each(function(){var e=a(this),g=b.applyLast===!0;e.find("span.sign").remove(),e.find("> thead [colspan]").each(function(){for(var b=parseFloat(a(this).attr("colspan")),c=1;b>c;c++)a(this).after('<th class="colspan-compensate">')}),e.find("> thead [rowspan]").each(function(){for(var b=a(this),c=parseFloat(b.attr("rowspan")),d=1;c>d;d++){var e=b.parent("tr"),f=e.next("tr"),g=e.children().index(b);f.children().eq(g).before('<th class="rowspan-compensate">')}}),e.find("> thead tr").each(function(b){a(this).find("th").each(function(c){var d=a(this);d.addClass("nosort").removeClass("up down"),d.attr("data-sortcolumn",c),d.attr("data-sortkey",c+"-"+b)})}),e.find("> thead .rowspan-compensate, .colspan-compensate").remove(),e.find("th").each(function(){var b=a(this);if(void 0!==b.attr("data-dateformat")&&d){var f=parseFloat(b.attr("data-sortcolumn"));e.find("td:nth-child("+(f+1)+")").each(function(){var d=a(this);d.attr("data-value",c(d.text(),b.attr("data-dateformat")).format("YYYY/MM/DD/HH/mm/ss"))})}else if(void 0!==b.attr("data-valueprovider")){var f=parseFloat(b.attr("data-sortcolumn"));e.find("td:nth-child("+(f+1)+")").each(function(){var c=a(this);c.attr("data-value",new RegExp(b.attr("data-valueprovider")).exec(c.text())[0])})}}),e.find("td").each(function(){var b=a(this);void 0!==b.attr("data-dateformat")&&d?b.attr("data-value",c(b.text(),b.attr("data-dateformat")).format("YYYY/MM/DD/HH/mm/ss")):void 0!==b.attr("data-valueprovider")?b.attr("data-value",new RegExp(b.attr("data-valueprovider")).exec(b.text())[0]):void 0===b.attr("data-value")&&b.attr("data-value",b.text())});var i=f(e),j=i.bsSort;e.find('> thead th[data-defaultsort!="disabled"]').each(function(b){var c=a(this),d=c.closest("table.sortable");c.data("sortTable",d);var e=c.attr("data-sortkey"),f=g?i.lastSort:-1;j[e]=g?j[e]:c.attr("data-defaultsort"),void 0!==j[e]&&g===(e===f)&&(j[e]="asc"===j[e]?"desc":"asc",h(c,d))})})}function e(b){var c=a(b),d=c.data("sortTable")||c.closest("table.sortable");h(c,d)}function f(b){var c=b.data("bootstrap-sortable-context");return void 0===c&&(c={bsSort:[],lastSort:void 0},b.find('> thead th[data-defaultsort!="disabled"]').each(function(b){var d=a(this),e=d.attr("data-sortkey");c.bsSort[e]=d.attr("data-defaultsort"),void 0!==c.bsSort[e]&&(c.lastSort=e)}),b.data("bootstrap-sortable-context",c)),c}function g(a,c){b(a,c)}function h(b,c){c.trigger("before-sort");var d=parseFloat(b.attr("data-sortcolumn")),e=f(c),g=e.bsSort,l=b.attr("colspan");if(l){var m=parseFloat(b.data("mainsort"))||0,n=parseFloat(b.data("sortkey").split("-").pop());if(c.find("> thead tr").length-1>n)return void h(c.find('[data-sortkey="'+(d+m)+"-"+(n+1)+'"]'),c);d+=m}var o=b.attr("data-defaultsign")||i;if(c.find("> thead th").each(function(){a(this).removeClass("up").removeClass("down").addClass("nosort")}),a.browser.mozilla){var p=c.find("> thead div.mozilla");void 0!==p&&(p.find(".sign").remove(),p.parent().html(p.html())),b.wrapInner('<div class="mozilla"></div>'),b.children().eq(0).append('<span class="sign '+o+'"></span>')}else c.find("> thead span.sign").remove(),b.append('<span class="sign '+o+'"></span>');var q=b.attr("data-sortkey"),r="desc"!==b.attr("data-firstsort")?"desc":"asc",s=g[q]||r;(e.lastSort===q||void 0===g[q])&&(s="asc"===s?"desc":"asc"),g[q]=s,e.lastSort=q,"desc"===g[q]?(b.find("span.sign").addClass("up"),b.addClass("up").removeClass("down nosort")):b.addClass("down").removeClass("up nosort");var t=c.children("tbody").children("tr"),u=[];a(t.filter('[data-disablesort="true"]').get().reverse()).each(function(b,c){var d=a(c);u.push({index:t.index(d),row:d}),d.remove()});var v=t.not('[data-disablesort="true"]');if(0!=v.length){var w="asc"===g[q]?k:!1;j(v,{emptyEnd:w,selector:"td:nth-child("+(d+1)+")",order:g[q],data:"value"})}a(u.reverse()).each(function(a,b){0===b.index?c.children("tbody").prepend(b.row):c.children("tbody").children("tr").eq(b.index-1).after(b.row)}),c.find("> tbody > tr > td.sorted,> thead th.sorted").removeClass("sorted"),v.find("td:eq("+d+")").addClass("sorted"),b.addClass("sorted"),c.trigger("sorted")}var i,j,k,l=a(document);if(a.bootstrapSortable=function(a){void 0==a?d({}):a.constructor===Boolean?d({applyLast:a}):void 0!==a.sortingHeader?e(a.sortingHeader):d(a)},l.on("click",'table.sortable>thead th[data-defaultsort!="disabled"]',function(a){e(this)}),!a.browser){a.browser={chrome:!1,mozilla:!1,opera:!1,msie:!1,safari:!1};var m=navigator.userAgent;a.each(a.browser,function(b){a.browser[b]=new RegExp(b,"i").test(m)?!0:!1,a.browser.mozilla&&"mozilla"===b&&(a.browser.mozilla=new RegExp("firefox","i").test(m)?!0:!1),a.browser.chrome&&"safari"===b&&(a.browser.safari=!1)})}a(a.bootstrapSortable)});