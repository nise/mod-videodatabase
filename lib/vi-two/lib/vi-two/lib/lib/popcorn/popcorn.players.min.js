(function(g,c){function d(b,a){if(b.currentStyle)return b.currentStyle[a];else if(c.getComputedStyle)return document.defaultView.getComputedStyle(b,null).getPropertyValue(a)}function h(b){return'<div><a href="'+b.user.profile+'"><img width="16px height="16px" src="'+b.user.avatar+'"></img>'+b.user.name+"</a> at "+function(a){var f=p(a/60);a=m(a%60);return f+"."+(a<10?"0":"")+a}(b.start)+" "+function(a){function f(e,i){return e+" "+i+(e>1?"s":"")+" ago"}a=((new Date).getTime()-a.getTime())/1E3;if(a<
60)return f(m(a),"second");a/=60;if(a<60)return f(m(a),"minute");a/=60;if(a<24)return f(m(a),"hour");a/=24;if(a<30)return f(m(a),"day");if(a<365)return f(m(a/30),"month");return f(m(a/365),"year")}(b.date)+"<br />"+b.text+"</span>"}function k(b){if(c.swfobject&&c.soundcloud){var a={enable_api:true,object_id:b._playerId,url:b.src,show_comments:!b._options.api.key&&!b._options.api.commentdiv},f={id:b._playerId,name:b._playerId},e=document.createElement("div");e.setAttribute("id",b._playerId);b._container.appendChild(e);
swfobject.embedSWF("http://player.soundcloud.com/player.swf",b._playerId,b.offsetWidth,b.height,"9.0.0","expressInstall.swf",a,{allowscriptaccess:"always",wmode:"transparent"},f)}else setTimeout(function(){k(b)},15)}var q=Math.abs,p=Math.floor,m=Math.round,l={};g.getScript("http://ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js");g.getScript("http://popcornjs.org/code/players/soundcloud/lib/soundcloud.player.api.js",function(){var b=1;soundcloud.addEventListener("onPlayerReady",function(a,
f){var e=l[a.api_getFlashId()];e.swfObj=a;e.duration=a.api_getTrackDuration();e.currentTime=a.api_getTrackPosition();e.volume=e.previousVolume=a.api_getVolume()/100;e._mediaId=f.mediaId;e.dispatchEvent("load");e.dispatchEvent("canplay");e.dispatchEvent("durationchange");e.timeupdate()});soundcloud.addEventListener("onMediaStart",function(a){a=l[a.api_getFlashId()];a.played=1;a.dispatchEvent("playing")});soundcloud.addEventListener("onMediaPlay",function(a){if(b)b=0;else l[a.api_getFlashId()].dispatchEvent("play")});
soundcloud.addEventListener("onMediaPause",function(a){l[a.api_getFlashId()].dispatchEvent("pause")});soundcloud.addEventListener("onMediaBuffering",function(a){a=l[a.api_getFlashId()];a.dispatchEvent("progress");if(a.readyState===0){a.readyState=3;a.dispatchEvent("readystatechange")}});soundcloud.addEventListener("onMediaDoneBuffering",function(a){l[a.api_getFlashId()].dispatchEvent("canplaythrough")});soundcloud.addEventListener("onMediaEnd",function(a){a=l[a.api_getFlashId()];a.paused=1;a.dispatchEvent("ended")});
soundcloud.addEventListener("onMediaSeek",function(a){var f=l[a.api_getFlashId()];f.setCurrentTime(a.api_getTrackPosition());f.paused&&f.dispatchEvent("timeupdate")});soundcloud.addEventListener("onPlayerError",function(a){l[a.api_getFlashId()].dispatchEvent("error")})});g.soundcloud=function(b,a,f){return new g.soundcloud.init(b,a,f)};g.soundcloud.init=function(){function b(a){var f=a._options,e=a._container,i=e.getBoundingClientRect();a.width=f.width||d(e,"width")||"100%";a.height=f.height||d(e,
"height")||"81px";a.src=f.src;a.autoplay=f.autoplay;if(parseFloat(a.height,10)!==81)a.height="81px";a.offsetLeft=i.left;a.offsetTop=i.top;a.offsetHeight=parseFloat(a.height,10);a.offsetWidth=parseFloat(a.width,10);if(/[\d]+%/.test(a.width)){f=d(e,"width");a._container.style.width=a.width;a.offsetWidth=a._container.offsetWidth;a._container.style.width=f}if(/[\d]+%/.test(a.height)){f=d(e,"height");a._container.style.height=a.height;a.offsetHeight=a._container.offsetHeight;a._container.style.height=
f}}return function(a,f,e){if(a)if(f){if(/file/.test(location.protocol))throw"Must run from a web server!";}else throw"Must supply a source!";else throw"Must supply an id!";if(!(this._container=document.getElementById(a)))throw"Could not find that container in the DOM!";e=e||{};e.api=e.api||{};e.target=a;e.src=f;e.api.commentformat=e.api.commentformat||h;this._mediaId=0;this._listeners={};this._playerId=g.guid(e.target);this._containerId=e.target;this._options=e;this._comments=[];this._popcorn=null;
b(this);this.duration=0;this.volume=1;this.ended=this.currentTime=0;this.paused=1;this.readyState=0;this.playbackRate=1;this.left=this.top=0;this.autoplay=null;this.played=0;this.addEventListener("load",function(){var i=this.getBoundingClientRect();this.top=i.top;this.left=i.left;this.offsetWidth=this.swfObj.offsetWidth;this.offsetHeight=this.swfObj.offsetHeight;this.offsetLeft=this.swfObj.offsetLeft;this.offsetTop=this.swfObj.offsetTop});l[this._playerId]=this;k(this)}}();g.soundcloud.init.prototype=
g.soundcloud.prototype;g.extend(g.soundcloud.prototype,{setVolume:function(b){if(!(!b&&b!==0)){if(b<0)b=-b;if(b>1)b%=1;this.volume=this.previousVolume=b;this.swfObj.api_setVolume(b*100);this.dispatchEvent("volumechange")}},setCurrentTime:function(b){if(!(!b&&b!==0)){this.currentTime=this.previousCurrentTime=b;this.ended=b>=this.duration;this.dispatchEvent("seeked")}},play:function(){if(this.swfObj){if(this.paused){this.paused=0;this.swfObj.api_play()}}else this.addEventListener("load",this.play)},
pause:function(){if(this.swfObj){if(!this.paused){this.paused=1;this.swfObj.api_pause()}}else this.addEventListener("load",this.pause)},mute:function(){if(this.swfObj)if(this.muted())if(this.paused)this.setVolume(this.oldVol);else this.volume=this.oldVol;else{this.oldVol=this.volume;if(this.paused)this.setVolume(0);else this.volume=0}else this.addEventListener("load",this.mute)},muted:function(){return this.volume===0},load:function(){if(this.swfObj){this.play();this.pause()}else this.addEventListener("load",
this.load)},addEventListener:function(b,a){this._listeners[b]||(this._listeners[b]=[]);this._listeners[b].push(a);return a},dispatchEvent:function(b){var a=this;b=b.type||b;b==="play"&&this.paused||b==="pause"&&!this.paused?this[b]():g.forEach(this._listeners[b],function(f){f.call(a)})},timeupdate:function(){var b=this,a=this.swfObj.api_getVolume()/100;if(q(this.currentTime-this.previousCurrentTime)>0.25)this.swfObj.api_seekTo(this.currentTime);else this.previousCurrentTime=this.currentTime=this.swfObj.api_getTrackPosition();
if(a!==this.previousVolume)this.setVolume(a);else this.volume!==this.previousVolume&&this.setVolume(this.volume);this.paused||this.dispatchEvent("timeupdate");b.ended||setTimeout(function(){b.timeupdate.call(b)},33)},getBoundingClientRect:function(){var b;if(this.swfObj){b=this.swfObj.getBoundingClientRect();return{bottom:b.bottom,left:b.left,right:b.right,top:b.top,width:b.width||b.right-b.left,height:b.height||b.bottom-b.top}}else{tmp=this._container.getBoundingClientRect();return{left:tmp.left,
top:tmp.top,width:this.offsetWidth,height:this.offsetHeight,bottom:tmp.top+this.width,right:tmp.top+this.height}}},registerPopcornWithPlayer:function(b){if(this.swfObj){this._popcorn=b;var a=this._options.api;if(a.key&&a.commentdiv){var f=this;g.xhr({url:"http://api.soundcloud.com/tracks/"+f._mediaId+"/comments.js?consumer_key="+a.key,success:function(e){g.forEach(e.json,function(i){f.addComment({start:i.timestamp/1E3,date:new Date(i.created_at),text:i.body,user:{name:i.user.username,profile:i.user.permalink_url,
avatar:i.user.avatar_url}})})}})}}else this.addEventListener("load",function(){this.registerPopcornWithPlayer(b)})}});g.extend(g.soundcloud.prototype,{addComment:function(b,a){var f=this,e={start:b.start||0,date:b.date||new Date,text:b.text||"",user:{name:b.user.name||"",profile:b.user.profile||"",avatar:b.user.avatar||""},display:function(){return(a||f._options.api.commentformat)(e)}};this._comments.push(e);this._popcorn&&this._popcorn.subtitle({start:e.start,target:this._options.api.commentdiv,
display:"inline",language:"en",text:e.display()})}})})(Popcorn,window);(function(){vimeo_player_loaded=function(g){vimeo_player_loaded[g]&&vimeo_player_loaded[g]()};vimeo_player_loaded.seek={};vimeo_player_loaded.loadProgress={};vimeo_player_loaded.play={};vimeo_player_loaded.pause={};Popcorn.player("vimeo",{_setup:function(g){var c=this,d,h=document.createElement("div"),k=0,q=false,p=0,m,l;h.id=c.id+Popcorn.guid();c.appendChild(h);l=c.style.width?""+c.offsetWidth:"560";m=c.style.height?""+c.offsetHeight:"315";var b=function(){var a;a=c.src;var f=0,e=false;vimeo_player_loaded[h.id]=
function(){d=document.getElementById(h.id);vimeo_player_loaded.seek[h.id]=function(j){if(j!==k){k=j;c.dispatchEvent("seeked");c.dispatchEvent("timeupdate")}};vimeo_player_loaded.play[h.id]=function(){if(c.paused){c.paused=false;c.dispatchEvent("play");c.dispatchEvent("playing");i()}};vimeo_player_loaded.pause[h.id]=function(){if(!c.paused){c.paused=true;c.dispatchEvent("pause")}};vimeo_player_loaded.loadProgress[h.id]=function(j){if(!e){e=true;c.dispatchEvent("loadstart")}j.percent===100&&c.dispatchEvent("canplaythrough")};
d.api_addEventListener("seek","vimeo_player_loaded.seek."+h.id);d.api_addEventListener("loadProgress","vimeo_player_loaded.loadProgress."+h.id);d.api_addEventListener("play","vimeo_player_loaded.play."+h.id);d.api_addEventListener("pause","vimeo_player_loaded.pause."+h.id);var i=function(){if(!c.paused){k=d.api_getCurrentTime();c.dispatchEvent("timeupdate");setTimeout(i,10)}},o=function(){var j=d.api_getVolume()===0,n=d.api_getVolume();if(q!==j){q=j;c.dispatchEvent("volumechange")}if(p!==n){p=n;c.dispatchEvent("volumechange")}setTimeout(o,
250)};c.play=function(){c.paused=false;c.dispatchEvent("play");c.dispatchEvent("playing");i();d.api_play()};c.pause=function(){if(!c.paused){c.paused=true;c.dispatchEvent("pause");d.api_pause()}};Popcorn.player.defineProperty(c,"currentTime",{set:function(j){if(!j)return k;k=+j;c.dispatchEvent("seeked");c.dispatchEvent("timeupdate");d.api_seekTo(k);return k},get:function(){return k}});Popcorn.player.defineProperty(c,"muted",{set:function(j){if(d.api_getVolume()===0!==j)if(j){f=d.api_getVolume();d.api_setVolume(0)}else d.api_setVolume(f)},
get:function(){return d.api_getVolume()===0}});Popcorn.player.defineProperty(c,"volume",{set:function(j){if(!j||typeof j!=="number"||j<0||j>1)return d.api_getVolume()/100;if(d.api_getVolume()!==j){d.api_setVolume(j*100);p=d.api_getVolume();c.dispatchEvent("volumechange")}return d.api_getVolume()/100},get:function(){return d.api_getVolume()/100}});c.readyState=4;c.dispatchEvent("canplaythrough");c.dispatchEvent("load");c.duration=d.api_getDuration();c.dispatchEvent("durationchange");o();c.dispatchEvent("loadeddata")};
if(!(a=function(i){if(i){var o=/^http:\/\/player\.vimeo\.com\/video\/[\d]+/i,j=/vimeo\.com\/[\d]+/;return(o=i.match(o)?i.match(o)[0].substr(30):"")?o:i.match(j)?i.match(j)[0].substr(10):""}}(a)))throw"Invalid Video Id";a={clip_id:a,js_api:1,js_swf_id:h.id};Popcorn.extend(a,g);swfobject.embedSWF("//vimeo.com/moogaloop.swf",h.id,l,m,"9.0.0","expressInstall.swf",a,{allowscriptaccess:"always",allowfullscreen:"true",wmode:"transparent"},{})};window.swfobject?b():Popcorn.getScript("//ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js",
b)}})})();var onYouTubePlayerReady=function(g){onYouTubePlayerReady[g]&&onYouTubePlayerReady[g]()};onYouTubePlayerReady.stateChangeEventHandler={};
Popcorn.player("youtube",{_setup:function(g){var c=this,d,h=document.createElement("div"),k=0,q=0,p=false,m=false,l=100;h.id=c.id+Popcorn.guid();c.appendChild(h);var b=function(){var a,f,e,i;onYouTubePlayerReady[h.id]=function(){d=document.getElementById(h.id);onYouTubePlayerReady.stateChangeEventHandler[h.id]=function(n){if(n===1)c.paused&&c.play();else if(n===2)if(p&&q===k&&q!==d.getCurrentTime()){p=false;d.seekTo(k)}else{k=d.getCurrentTime();c.dispatchEvent("timeupdate");!c.paused&&c.pause()}};
d.addEventListener("onStateChange","onYouTubePlayerReady.stateChangeEventHandler."+h.id);var o=function(){if(!c.paused){k=d.getCurrentTime();c.dispatchEvent("timeupdate");setTimeout(o,10)}},j=function(){if(m!==d.isMuted()){m=d.isMuted();c.dispatchEvent("volumechange")}if(l!==d.getVolume()){l=d.getVolume();c.dispatchEvent("volumechange")}setTimeout(j,250)};c.play=function(){c.paused=false;c.dispatchEvent("play");c.dispatchEvent("playing");o();d.playVideo()};c.pause=function(){if(!c.paused){c.paused=
true;c.dispatchEvent("pause");d.pauseVideo()}};Popcorn.player.defineProperty(c,"currentTime",{set:function(n){k=q=+n;p=true;c.dispatchEvent("seeked");c.dispatchEvent("timeupdate");d.seekTo(k);return k},get:function(){return k}});Popcorn.player.defineProperty(c,"muted",{set:function(n){if(d.isMuted()!==n){n?d.mute():d.unMute();m=d.isMuted();c.dispatchEvent("volumechange")}return d.isMuted()},get:function(){return d.isMuted()}});Popcorn.player.defineProperty(c,"volume",{set:function(n){if(d.getVolume()/
100!==n){d.setVolume(n*100);l=d.getVolume();c.dispatchEvent("volumechange")}return d.getVolume()/100},get:function(){return d.getVolume()/100}});c.readyState=4;c.dispatchEvent("canplaythrough");c.dispatchEvent("load");c.duration=d.getDuration();c.dispatchEvent("durationchange");j();c.dispatchEvent("loadeddata")};g.controls=+g.controls===0||+g.controls===1?g.controls:1;g.annotations=+g.annotations===1||+g.annotations===3?g.annotations:1;a={playerapiid:h.id};f={id:h.id};e=/^.*(?:\/|v=)(.{11})/.exec(c.src)[1];
i=(c.src.split("?")[1]||"").replace(/v=.{11}/,"");swfobject.embedSWF("//www.youtube.com/e/"+e+"?"+i+"&enablejsapi=1&playerapiid="+h.id+"&version=3",h.id,c.style.width?""+c.offsetWidth:"560",c.style.height?""+c.offsetHeight:"315","8",null,a,{wmode:"transparent",allowScriptAccess:"always"},f)};window.swfobject?b():Popcorn.getScript("//ajax.googleapis.com/ajax/libs/swfobject/2.2/swfobject.js",b)}});
