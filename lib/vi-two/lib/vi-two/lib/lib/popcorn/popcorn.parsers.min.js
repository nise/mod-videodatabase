(function(o){o.parser("parseJSON","JSON",function(e){var n={title:"",remote:"",data:[]};o.forEach(e.data,function(i){n.data.push(i)});return n})})(Popcorn);(function(o){o.parser("parseSBV",function(e){var n={title:"",remote:"",data:[]},i=[],d=0,j=0,g=function(a){a=a.split(":");var m=a.length-1,l;try{l=parseInt(a[m-1],10)*60+parseFloat(a[m],10);if(m===2)l+=parseInt(a[0],10)*3600}catch(p){throw"Bad cue";}return l},h=function(a,m){var l={};l[a]=m;return l};e=e.text.split(/(?:\r\n|\r|\n)/gm);for(j=e.length;d<j;){var k={},f=[],b=e[d++].split(",");try{k.start=g(b[0]);for(k.end=g(b[1]);d<j&&e[d];)f.push(e[d++]);k.text=f.join("<br />");i.push(h("subtitle",k))}catch(c){for(;d<
j&&e[d];)d++}for(;d<j&&!e[d];)d++}n.data=i;return n})})(Popcorn);(function(o){o.parser("parseSRT",function(e){var n={title:"",remote:"",data:[]},i=[],d=0,j=0,g=0,h,k,f,b=function(a){a=a.split(":");try{var m=a[2].split(",");if(m.length===1)m=a[2].split(".");return parseFloat(a[0],10)*3600+parseFloat(a[1],10)*60+parseFloat(m[0],10)+parseFloat(m[1],10)/1E3}catch(l){return 0}},c=function(a,m){var l={};l[a]=m;return l};e=e.text.split(/(?:\r\n|\r|\n)/gm);j=e.length;for(d=0;d<j;d++){f={};k=[];f.id=parseInt(e[d++],10);h=e[d++].split(/[\t ]*--\>[\t ]*/);f.start=b(h[0]);
g=h[1].indexOf(" ");if(g!==-1)h[1]=h[1].substr(0,g);for(f.end=b(h[1]);d<j&&e[d];)k.push(e[d++]);f.text=k.join("\\N").replace(/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,"");f.text=f.text.replace(/</g,"&lt;").replace(/>/g,"&gt;");f.text=f.text.replace(/&lt;(\/?(font|b|u|i|s))((\s+(\w|\w[\w\-]*\w)(\s*=\s*(?:\".*?\"|'.*?'|[^'\">\s]+))?)+\s*|\s*)(\/?)&gt;/gi,"<$1$3$7>");f.text=f.text.replace(/\\N/gi,"<br />");i.push(c("subtitle",f))}n.data=i;return n})})(Popcorn);(function(o){function e(d,j){var g=d.substr(10).split(","),h;h={start:n(g[j.start]),end:n(g[j.end])};if(h.start===-1||h.end===-1)throw"Invalid time";var k=a.call(b,/\{(\\[\w]+\(?([\w\d]+,?)+\)?)+\}/gi,""),f=k.replace,b;b=g.length;a=[];for(var c=j.text;c<b;c++)a.push(g[c]);b=a.join(",");var a=b.replace;h.text=f.call(k,/\\N/gi,"<br />");return h}function n(d){var j=d.split(":");if(d.length!==10||j.length<3)return-1;return parseInt(j[0],10)*3600+parseInt(j[1],10)*60+parseFloat(j[2],10)}function i(d,
j){var g={};g[d]=j;return g}o.parser("parseSSA",function(d){var j={title:"",remote:"",data:[]},g=[],h=0,k;d=d.text.split(/(?:\r\n|\r|\n)/gm);for(k=d.length;h<k&&d[h]!=="[Events]";)h++;var f=d[++h].substr(8).split(", "),b={},c,a;a=0;for(c=f.length;a<c;a++)if(f[a]==="Start")b.start=a;else if(f[a]==="End")b.end=a;else if(f[a]==="Text")b.text=a;for(;++h<k&&d[h]&&d[h][0]!=="[";)try{g.push(i("subtitle",e(d[h],b)))}catch(m){}j.data=g;return j})})(Popcorn);(function(o){o.parser("parseTTML",function(e){var n={title:"",remote:"",data:[]},i,d=0,j,g=function(f,b){if(!f)return-1;var c=f.split(":"),a=c.length-1;if(a>=2)return parseInt(c[0],10)*3600+parseInt(c[a-1],10)*60+parseFloat(c[a],10);for(c=f.length-1;c>=0;c--)if(f[c]<="9"&&f[c]>="0")break;c++;a=f.substr(c);b=b||0;if(a==="h")a=3600;else if(a==="m")a=60;else if(a==="s")a=1;else if(a==="ms")a=0.0010;else return-1;return parseFloat(f.substr(0,c))*a+b},h=function(f,b){var c={};c[f]=b;return c},k=function(f,
b){for(var c=f.firstChild,a;c;){if(c.nodeType===1)if(c.nodeName==="p"){a=c;var m=b,l={};l.text=a.textContent.replace(/^[\s]+|[\s]+$/gm,"").replace(/(?:\r\n|\r|\n)/gm,"<br />");l.id=a.getAttribute("xml:id")||a.getAttribute("id");l.start=g(a.getAttribute("begin"),m);l.end=g(a.getAttribute("end"),m);l.target=j;if(l.end<0){l.end=g(a.getAttribute("duration"),0);if(l.end>=0)l.end+=l.start;else l.end=Number.MAX_VALUE}a=l;n.data.push(h("subtitle",a));d++}else if(c.nodeName==="div"){a=g(c.getAttribute("begin"));
if(a<0)a=b;k(c,a)}c=c.nextSibling}};if(!e.xml||!e.xml.documentElement||!(i=e.xml.documentElement.firstChild))return n;for(;i.nodeName!=="body";)i=i.nextSibling;j="";k(i,0);return n})})(Popcorn);(function(o){o.parser("parseTTXT",function(e){var n={title:"",remote:"",data:[]},i=function(k){k=k.split(":");var f=0;try{return parseFloat(k[0],10)*60*60+parseFloat(k[1],10)*60+parseFloat(k[2],10)}catch(b){f=0}return f},d=function(k,f){var b={};b[k]=f;return b};e=e.xml.lastChild.lastChild;for(var j=Number.MAX_VALUE,g=[];e;){if(e.nodeType===1&&e.nodeName==="TextSample"){var h={};h.start=i(e.getAttribute("sampleTime"));h.text=e.getAttribute("text");if(h.text){h.end=j-0.0010;g.push(d("subtitle",h))}j=
h.start}e=e.previousSibling}n.data=g.reverse();return n})})(Popcorn);(function(o){function e(i){var d=i.split(":");i=i.length;var j;if(i!==12&&i!==9)throw"Bad cue";i=d.length-1;try{j=parseInt(d[i-1],10)*60+parseFloat(d[i],10);if(i===2)j+=parseInt(d[0],10)*3600}catch(g){throw"Bad cue";}return j}function n(i,d){var j={};j[i]=d;return j}o.parser("parseVTT",function(i){var d={title:"",remote:"",data:[]},j=[],g=0,h=0,k,f;i=i.text.split(/(?:\r\n|\r|\n)/gm);h=i.length;if(h===0||i[0]!=="WEBVTT")return d;for(g++;g<h;){k=[];try{for(var b=g;b<h&&!i[b];)b++;g=b;var c=i[g++];b=
void 0;var a={};if(!c||c.indexOf("--\>")===-1)throw"Bad cue";b=c.replace(/--\>/," --\> ").split(/[\t ]+/);if(b.length<2)throw"Bad cue";a.id=c;a.start=e(b[0]);a.end=e(b[2]);for(f=a;g<h&&i[g];)k.push(i[g++]);f.text=k.join("<br />");j.push(n("subtitle",f))}catch(m){for(g=g;g<h&&i[g];)g++;g=g}}d.data=j;return d})})(Popcorn);(function(o){o.parser("parseXML","XML",function(e){var n={title:"",remote:"",data:[]},i={},d=function(b){b=b.split(":");if(b.length===1)return parseFloat(b[0],10);else if(b.length===2)return parseFloat(b[0],10)+parseFloat(b[1]/12,10);else if(b.length===3)return parseInt(b[0]*60,10)+parseFloat(b[1],10)+parseFloat(b[2]/12,10);else if(b.length===4)return parseInt(b[0]*3600,10)+parseInt(b[1]*60,10)+parseFloat(b[2],10)+parseFloat(b[3]/12,10)},j=function(b){for(var c={},a=0,m=b.length;a<m;a++){var l=b.item(a).nodeName,
p=b.item(a).nodeValue;if(l==="in")c.start=d(p);else if(l==="out")c.end=d(p);else if(l==="resourceid")o.extend(c,i[p]);else c[l]=p}return c},g=function(b,c){var a={};a[b]=c;return a},h=function(b,c,a){var m={};o.extend(m,c,j(b.attributes),{text:b.textContent});c=b.childNodes;if(c.length<1||c.length===1&&c[0].nodeType===3)if(a)i[m.id]=m;else n.data.push(g(b.nodeName,m));else for(b=0;b<c.length;b++)c[b].nodeType===1&&h(c[b],m,a)};e=e.documentElement.childNodes;for(var k=0,f=e.length;k<f;k++)if(e[k].nodeType===
1)e[k].nodeName==="manifest"?h(e[k],{},true):h(e[k],{},false);return n})})(Popcorn);
